eval(q=%q~c=
->(λ){->(b){->(c){->(d){->(e){->(f){->(g){->(h){->(i){->(j){->(k){->(l){->(m){->(n){->(o){->(p){->(q){->(r){->(s){->(t){->(u){->(v){->(w){->(x){->(y){->(z){->(α){->(β){->(γ){->(δ){->(ε){->(ζ){->(η){->(θ){->(ι){->(κ){->(μ){->(ν){->(ξ){->(ο){->(π){->(ρ){->(ς){->(σ){->(τ){->(υ){->(φ){->(χ){->(ψ){->(ω){->(а){->(б){->(в){->(г){->(д){->(е){->(ж){->(з){->(и){->(й){->(к){->(л){->(м){->(н){->(о){->(п){->(р){->(с){->(т){->(у){->(ф){->(х){->(♟){->(♞){->(♚){->(♝){->(♜){->(♛){->(ч){->(a){->(ш){->(h){->(q){->(s){->(t){->(u){->(z){((λ))[((ν))[((и))[а[h]][ψ[((h))]]]][->(ю){s[(h)]}][->(ю){a[((h))][->(p){->(l){((λ))[n[l]][->(ю){->(k){((λ))[->(j){->(e){((λ))[м[e][(л)[j][->(ю){((g))}]][->(b){->(c){->(d){λ[((b))][->(ю){(g)}][->(ю){((п))[♚[ч][(д)[c][d][c][d][j][l][r]]]}]}}}][f]][->(ю){(g)}][->(ю){р[j][(σ)[(e)]][ч]}]}[л[((j))][->(λ){e[(μ)[(λ)]][((ι))[(λ)][(γ)]]}]]}[а[((((k))))]]][->(ю){q[(k)]}][->(ю){t[((k))]}]}[->(λ){д[(ψ)[(λ)]][((ω))[(λ)]][ψ[h]][ω[h]][а[λ]][г[λ]][в[(λ)]]}[m[l]]]}][->(ю){u[((p))]}]}[->(b){λ[(n)[(b)]][->(ю){a[(у)[m[b]][(p)]][->(λ){o[g][(λ)]}][->(ю){o[f][l]}]}][->(ю){((b))}]}[->(e){λ[(w)[m[(e)]]][->(ю){o[f][(l)]}][->(ю){->(b){o[g][(θ)[n[b]][m[(z)[->(λ){x[(n)[(λ)]][m[b]][o[(v)[n[λ]][m[(b)]]][(l)]][o[(n)[(λ)]][n[λ]]]}][o[z][(l)]]]]]}[τ[((e))][->(b){->(c){λ[(w)[m[(b)]]][->(ю){ς[b][(c)]}][->(ю){y[(г)[(c)]][((г))[σ[(b)]]][ς[b][c]][x[(г)[(c)]][г[(σ)[b]]][(ς)[ρ][(c)]][b]]}]}}][(ρ)]]}]}[τ[(ш)[p][g][л[(а)[(p)]][->(λ){c[(ν)[((λ))]]}]]][->(c){->(d){ς[c][(τ)[ш[d][f][(ς)[ρ][ω[((d))]]]][->(λ){->(b){x[(г)[(b)]][г[λ]][λ][у[λ][b]]}}][(d)]]}}][((ρ))]]]]}][->(ю){s[(h)]}]}]}}}}}}}[->(λ){->(b){->(c){->(d){м[(л)[d][b[ν][(μ)]]][c][->(e){->(f){->(g){a[(д)[f][g][б[λ]][χ[λ]][d][l][b[s][(r)]]][->(λ){ς[e][(λ)]}][->(ю){e}]}}}][ρ]}[а[((λ))]]}}}]}[->(b){->(t){->(c){->(d){λ[(п)[(t)]][->(ю){((c))[->(d){д[(ψ)[(b)]][((ω))[(b)]][ψ[(b)]][(ω)[(b)]][d][->(e){ж[((d))][->(f){->(g){->(h){p[(ν)[g][p][v][f][ζ[(g)]]][λ[(μ)[(g)]][->(ю){λ[(ι)[g][(γ)]][->(ю){((п))[ч[(и)[d][(e)]][д[e][h][e][e][d][l][(s)]]][z[α][q]][((l))]}][->(ю){l}]}][->(ю){l}]]}}}][z[α][(q)]]}[ω[(b)]]][в[(b)]]}[t[т][((l))][->(λ){->(b){->(c){->(d){->(e){с[(т)[λ][b][c][(d)]][e][e][(φ)]}[o[(n)[(c)]][m[b]]]}}}}][->(d){->(λ){->(b){->(c){->(e){т[(т)[d][λ][b][(c)]][o[(e)[l][(β)]][m[(λ)]]][o[(e)[i][(q)]][m[(λ)]]][(c)]}[x[(n)[(λ)]][n[b]]]}}}}][с][а[b]][ψ[b]][ω[b]][в[(b)]]]]}][->(ю){d[(λ)]}]}}}[ч[(и)[а[(b)]][(ψ)[b]]][b]]}]}[->(λ){λ[λ]}[->(b){->(c){ι[c][k][♟][(ι)[c][->(λ){->(b){λ[(λ)[λ[(λ)[b]]]]}}][(♜)][((ι))[c][j][♞][(ι)[c][i][♝][ι[c][q][♛][(ι)[c][γ][♚][->(λ){->(λ){(н)}}]]]]]][->(c){b[b][c]}]}}]]}[->(λ){->(b){->(c){d[(c)[♜[(λ)]]][c[(♝)[λ]]][о][н]}[->(λ){п[(λ)[(b)]]}]}}]}[((х))[->(λ){->(b){d[(w)[(λ)]][w[b]]}}]]}[(х)[->(λ){->(b){y[λ][(b)]}}]]}[((ф))[->(d){->(i){λ[(e)[x[k][(υ)[ψ[d]][ω[d]][n]]][(x)[k][υ[(ψ)[(d)]][ω[d]][m]]]][->(ю){(о)}][->(ю){е[((d))][->(k){->(p){->(q){λ[(e)[y[j][(υ)[p][q][n]]][(w)[υ[p][q][((m))]]]][->(ю){->(r){->(s){->(t){->(v){((λ))[->(λ){->(d){b[(ι)[λ][(γ)]][c[(δ)[λ]]][(ι)[d][(h)]][c[(δ)[d]]][(к)[k][p][s][u]]}}[и[k][p]][и[k][(s)]]][->(ю){λ[(р)[т[k][p][p][l]][p][(i)]][->(ю){λ[(р)[т[k][p][v][l]][v][(i)]][->(ю){(g)}][t]}][(t)]}][t]}}}[o[(r)[l][(β)]][m[(p)]]][->(ю){(f)}][o[(r)[u][t][n[(p)]]][m[p]]]}[(x)[n[p]][n[q]]]}][->(ю){((f))}]}}}][->(λ){->(λ){->(λ){->(b){->(λ){b}}}}}][н]}]}}]]}[((ф))[->(λ){->(ю){->(b){->(c){d[(e)[y[j][b]][y[k][(c)]]][e[(y)[k][(b)]][y[j][(c)]]][о][н]}}[(υ)[ψ[λ]][ω[λ]][(n)]][υ[(ψ)[(λ)]][ω[λ]][m]]}}]]}[((ф))[->(h){->(ю){е[((h))][->(i){->(f){->(p){->(z){->(q){->(r){λ[(z)[w[(v)[q][r]]][(w)[v[r][((q))]]]][->(ю){->(t){λ[(y)[k][(t)]][->(ю){->(u){->(v){λ[(w)[(u)]][->(ю){ξ[(и)[i][(p)]][y[r][(z)[β][(l)]][->(ю){->(ю){->(ю){->(ю){->(λ){λ}}}}}][о]][((н))]}][->(ю){λ[(y)[k][(u)]][->(ю){λ[(ξ)[и[i][(p)]]][->(ю){->(x){b[((g))][з[v][(o)[n[p]][((q))]]][ι[((x))][(k)]][z[μ][ν][x]][y[(υ)[б[h]][v][(m)]][(j)]][->(ю){->(ю){->(λ){->(ю){->(ю){λ}}}}}][н]}[и[i][((v))]]}][->(ю){о}]}][->(ю){н}]}]}}[(υ)[f][p][(n)]][χ[((h))]]}][->(ю){λ[(y)[j][(t)]][->(ю){λ[(w)[υ[f][p][(n)]]][->(ю){e[(ξ)[и[i][(p)]]][e[(ξ)[и[i][(o)[n[p]][й[f][p][m][q]]]]][c[(δ)[и[i][f]]]]][о][((н))]}][->(ю){н}]}][->(ю){(н)}]}]}[υ[f][p][((m))]]}][->(ю){(н)}]}}}[ν[(и)[i][f]]][(m)[(f)]][m[p]]}}}]}}]]}[->(b){((ф))[->(c){->(ю){е[((c))][->(d){->(e){->(f){λ[(b)[υ[e][f][n]][υ[e][f][(m)]]][->(ю){к[d][e][f][u][о][(н)]}][->(ю){((н))}]}}}]}}]}]}[->(o){->(n){->(m){е[((m))][->(l){->(k){->(j){λ[(κ)[и[l][(k)]][(ν)[и[l][(j)]]][μ[(и)[l][j]]][f]][->(ю){(н)}][->(ю){->(i){λ[(п)[(i)]][->(ю){->(c){->(d){->(h){τ[((h))][->(c){->(b){λ[((c))][->(ю){р[d][b][n][g][(f)]}][->(ю){(f)}]}}][(g)]}[л[((d))][->(λ){e[(ι)[λ][(γ)]][ν[λ][(ν)[(c)]][μ[c]]]}]]}}[и[l][k]][т[l][k][j][l]][i][((н))]}][->(ю){i}]}[(o)[m][n]]}]}}}]}}}]}[->(λ){->(b){д[(ψ)[(λ)]][ω[λ]][ψ[b]][ω[b]][а[b]][г[b]][в[(λ)]]}}]}[->(λ){->(b){->(c){->(ю){с[λ][b][c][(и)[λ][(b)]]}}}}]}[->(b){->(c){->(d){->(e){ο[b][((α))][->(w){->(y){ο[w][((α))][->(z){->(x){λ[(з)[o[x][y]][(d)]][->(ю){o[(o)[η[e]][ζ[(e)]]][o[(ε)[(e)]][g]]}][->(ю){з[(o)[x][(y)]][c][φ][((z))]}]}}]}}]}}}}]}[->(b){->(d){->(e){м[(л)[b][->(λ){ν[(и)[b][(d)]][μ[λ]][ν[λ]]}]][ς[ρ][d]][->(g){->(h){->(d){λ[((g))][->(ю){c[(п)[e[(и)[(b)][h]][д[h][d][h][d][b][l][(l)]]]]}][->(ю){f}]}}}][(g)]}}}]}[->(λ){λ[g][f][g][g][((g))]}]}[->(λ){->(ю){->(ю){->(ю){->(ю){λ}}}}}]}[->(ю){->(λ){->(ю){->(ю){->(ю){λ}}}}}]}[->(λ){->(b){->(c){->(d){τ[((λ))][->(e){->(f){τ[((b))][->(g){->(h){c[g][f][h]}}][e]}}][((d))]}}}}]}[->(λ){->(b){ж[((λ))][->(c){->(d){->(e){((b))[d][ς[c][e]][(c)]}}}][(ρ)]}}]}[->(b){->(c){->(e){->(h){->(i){->(j){λ[(d)[d[(w)[(i)]][w[(j)]]][y[i][(j)]]][->(ю){m[(h)[w[i][(υ)[c][e][(m)]][(i)]][->(λ){->(c){o[c][(m)[λ][ξ[(и)[b][c]]][(f)]]}[o[(й)[c][e][n][n[(n)[λ]]]][й[c][e][m][(m)[n[λ]]]]]}][(o)[c][(g)]]]}][->(ю){f}]}}[υ[c][e][n]][υ[c][e][m]]}}}}]}[->(λ){->(b){->(c){->(d){->(e){x[d][e][(y)[d][e][->(f){(f)}][(u)]][t]}}[(c)[(λ)]][c[((b))]]}}}]}[->(λ){->(b){θ[(θ)[λ][m[(b)]]][n[(b)]]}}]}[->(λ){->(b){e[(y)[n[λ]][n[(b)]]][y[(m)[(λ)]][m[((b))]]]}}]}[->(λ){->(b){->(c){π[λ][((α))][->(d){->(e){->(f){π[e][((α))][->(d){->(g){->(h){b[d][g][(o)[h][f]]}}}][d]}}}][((c))]}}}]}[->(λ){->(b){b[(а)[(λ)]][ψ[λ]][ω[(λ)]]}}]}[->(λ){->(b){->(c){->(d){->(e){->(f){->(g){o[(o)[o[λ][b]][o[e][(f)]]][o[g][(o)[c][((d))]]]}}}}}}}]}[->(λ){δ[(n)[(λ)]]}]}[->(λ){n[(m)[(λ)]]}]}[->(λ){n[(δ)[(λ)]]}]}[->(λ){ε[(n)[(λ)]]}]}[->(λ){m[(η)[(λ)]]}]}[->(λ){n[(η)[(λ)]]}]}[->(λ){m[(δ)[(λ)]]}]}[o[((o))[((g))][(l)]][o[f][((f))]]]}[->(λ){->(b){->(c){->(λ){->(b){x[λ][b][(v)[λ][(b)]][v[b][λ]]}}[(c)[(λ)]][c[((b))]]}}}]}[->(λ){->(b){->(c){π[(n)[(λ)]][m[λ]][->(d){->(e){->(ю){b[d][e]}}}][((c))]}}}]}[->(λ){θ[(n)[(λ)]][l]}]}[->(λ){->(b){o[(o)[b][n[(λ)]]][t[(m)[λ]]]}}]}[o[l][(l)]]}[->(λ){->(b){->(c){->(d){n[(b)[->(e){o[(c)[n[e]][θ[λ][(m)[e]]][(m)[e]]][(t)[m[e]]]}][o[((d))][((l))]]]}}}}]}[->(λ){->(b){->(c){n[(b)[->(d){o[(o)[c[(θ)[(λ)][(m)[((d))]]][m[(d)]]][n[(d)]]][u[(m)[(d)]]]}][o[l][(u)[((b))]]]]}}}]}[->(λ){c[(ε)[(λ)]]}]}[->(λ){κ[λ][g][f][((f))]}]}[->(λ){κ[λ][f][g][((f))]}]}[->(λ){->(b){->(c){->(d){ε[λ][(η)[λ][b][(c)]][d]}}}}]}[->(λ){->(b){y[b][(ζ)[((λ))]]}}]}[->(λ){->(b){n[(b)[m][((λ))]]}}]}[->(λ){n[(n)[(λ)]]}]}[->(λ){m[(n)[(λ)]]}]}[->(λ){n[(m)[(λ)]]}]}[->(λ){m[(m)[(λ)]]}]}[z[j][(i)]]}[p[i][(h)]]}[z[j][(h)]]}[->(λ){->(b){->(c){->((d)){(λ)[->(w){b[c][(w)]}][d]}}}}]}[->(b){->(c){λ[(x)[b][(c)]][->(ю){x[c][(b)]}][->(ю){((f))}]}}]}[->(λ){->(b){w[(v)[b][((λ))]]}}]}[->(λ){((λ))[->(ю){(f)}][g]}]}[->(λ){->(b){->(c){->(d){b[u][λ][c][((d))]}}}}]}[->(λ){m[(λ)[->(b){o[(t)[n[(b)]]][n[b]]}][(o)[l][((l))]]]}]}[->(λ){p[k][λ]}]}[(o)[o[g][q]][o[g][g]]]}[(o)[o[f][q]][o[g][g]]]}[(p)[j][((i))]]}[->(λ){->(b){->(c){->(d){b[c][(λ)[c][(d)]]}}}}]}[->(λ){->(b){->(c){c[λ][(b)]}}}]}[->(λ){λ[((g))]}]}[->(λ){λ[((f))]}]}[->(λ){->(b){b}}]}[->(λ){->(b){λ[b]}}]}[->(λ){->(b){λ[(λ)[((b))]]}}]}[->(λ){->(b){λ[(λ)[λ[((b))]]]}}]}[->(λ){->(b){λ[(λ)[λ[(λ)[(b)]]]]}}]}[->(λ){->(ю){λ}}]}[->(ю){->(λ){λ}}]}[->(λ){->(b){->(c){->(d){λ[(b)[c][(d)]][d]}}}}]}[->(λ){->(b){->(c){->(d){λ[c][(b)[(c)][(((d)))]]}}}}]}[->(λ){->(b){->(c){λ[c][(b)]}}}]}[->(λ){->(b){->(c){->(d){->(e){->(f){->(g){λ[(b)[c[(d)[e[f][g]][(g)]][(g)]][(g)]][g]}}}}}}}]}[->(λ){->(b){->(c){λ[b][((c))][(λ)]}}}];

last_board=[-10,-8,-9,-11,-12,-9,-8,-10,-7,-7,-7,-7,-7,-7,-7,-7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-4,-2,-3,-5,-6,-3,-2,-4]
copyright="© 2016 Colin Fulton. Licensed under BSD 3-clause. See LICENSE.txt included with file.";
captures=[];last_moved=[0,0,0,0];seed=rand(100);;



  require('zlib');require("base64");
  next_board=last_board;
  msg='';






  grph=eval(Zlib.inflate Base64.decode64 "eNrFVslu4zAM/RUjuuYQWfKSAsmPtD3NaYCiKObSQ9F/ryJK5aLFTiJnAseRKJnvkXyi8/X0eTrvXt67xh+lxET5T1xQqj0kxQzDCKa2goyhIXiEhGsLSJ9KuAlIv7QJZPSOBHgtX953++7pbRMpdSTQGHUc+N8NITG1aHkIXFTtViXNIXabR0mrlqsjyOhvExkRtLSGaQoSei0SgCXkRwiDF41L9K2mHMLFcsFHD+DAdI0SUKy/bMAho4a8ErC3CTWANv+k2mSvOo6nKkRWmcsLVXu5AJx7yUU2LFWwl/YXMlO0q8L2PHd6npfzrupUSo669flV2WxGcTPuqkjyP+a95J7nXfbMR+q9crBrmoFz++90ft65QfJFJ3EW0nHl4povSVTJn5zRyXVAkjcn0DieJRgZyw0wwnsGrIh2f/IqRbo7gwIsh1bUBAl8PVynKoKrzALWqztOH6fzl3ZH6rnXbpq5T/tu3HfzZeh+TbzGi2H2a1NYOwbr4K293zasNmg3tQHW/UxtOPG1ARAZ7rJBMOsls9mHbgOiuzSEdzFYWPP+4BESOjHrAMMsxrsycTtc3q2J5jFuMZiXHg2Q6AEfdAB6CGMIZ66HAzRJOBdSBxYP5jhhb6TFkvySSDQxG0QeWSRuONciMRjJHHiiK0DIS4Zol6hn8laiV3iC1znKJDEkjxjga5Dv8Q6+C5q3UtEj4853LD+Scrf540l12bNamXgstFQnyVELgyWSN0Gheo5q9eT1oRH7386QZOwGgyUKLxAfJG9D2gNtFRoRetpBgq5/1ZO0OOhXPTuIC0pPDImPTAXSV04hElIBuoWkkDbKAXdPTL7Gc+LN5Kr3QOIjDWrEmGDfUTSXvBXSpaWke3lA+Xts4YUKp8DWjrDur+PLKSRJTjJ2w9s3VznB+lD7X3DD/fX7+wdFf7Sb");












to_number = ->(peano) { peano[->(x) { x + 1}][0] }
to_peano = ->(number) { ->(succ) { ->(x) { number.times { x = succ[x] };x } } }
zero = ->(succ) { ->(zero) { zero } }
first = ->(first) { ->(second) { first } }
second = ->(first) { ->(second) { second } }
left = ->(p) { p[first] }
right = ->(p) { p[second] }
p = ->(left) { ->(right) { ->(choice) { choice[left][right] } } }

to_list = ->(array) { array.reverse.inject(zero) { |memo, item| p[item][memo] } }
to_array = ->(list, size) { result = []; size.times { result << left[list]; list = right[list] }; result }



to_piece = ->(piece_number) {
  abs=piece_number.abs;

  p[
    p[
      abs>6 ? first : second
    ][
      to_peano[abs>6 ? abs-6 : abs]
    ]
  ][
    p[
      abs==0 ? second : first
    ][
      abs>0 ? second : first
    ]
  ]
}

letters = /^[a-h]/
numbers = /^[1-8]/

letter_to_number = ->(letter) { letter.ord - 97 }
invert_number    = ->(number) { (number.to_i - 8).abs }
letter_to_piece_number  = ->(letter) {{q:5,k:2,r:4,b:3}[letter.to_sym] }

make_state = ->(board, from_x, from_y, to_x, to_y, promotion) {
  p[
    p[
      p[
        p[to_peano[from_x]][to_peano[from_y]]
      ][
        p[to_peano[to_x]][to_peano[to_y]]
      ]
    ][
      p[
        to_list[[*board.each_slice(8)].map { |row| to_list[row.map { |piece| to_piece[piece] }] }]
      ][
        zero
      ]
    ]
  ][
    p[
      to_piece[letter_to_piece_number[promotion]]
    ][
      p[
        p[to_peano[last_moved[0]]][to_peano[last_moved[1]]]
      ][
        p[to_peano[last_moved[2]]][to_peano[last_moved[3]]]
      ]
    ]
  ]
}

get_board = ->(state) {
  to_array[left[right[left[state]]], 8].map { |row|
    to_array[row, 8].map { |piece|
      left[right[piece]][(to_number[right[left[piece]]] + left[left[piece]][6][0]) * right[right[piece]][1][-1]][0]
    }
  }.flatten
}









get_from_to=->state{
  right[right[state]]
}


input = ARGV.join

input = input.downcase.gsub(/\W+/,'')
input +=?q if input.size == 4
from_x, from_y, to_x, to_y, promotion = input.chars


update_data = ->(x) {
  next_board=get_board[x].flatten
  z,w = [last_board,next_board].map{|b| b.sort.reject(&:zero?)}

  w.each { |e| captures << z.shift until z.empty? || z[0] == e;z.shift }if(z.size > w.size);

  if to_y==?8 && last_board[letter_to_number[from_x]+invert_number[from_y]*8] == 1
    captures.sort!.shift
    captures << letter_to_piece_number[promotion]
  end

  last_moved=[left[left[get_from_to[x]]],right[left[get_from_to[x]]],left[right[get_from_to[x]]],right[right[get_from_to[x]]]].map{|x|to_number[x]};
}


(input.size == 5 && from_x[letters] && to_x[letters] && from_y[numbers] && to_y[numbers] && promotion[/^[qkrb]/])?
  c[
    make_state[next_board, letter_to_number[from_x],invert_number[from_y], letter_to_number[to_x],invert_number[to_y], promotion]
  ][
   ->x{update_data[x]}
  ][
   ->x{msg=grph[:i]}
  ][
   ->x{update_data[x];msg=grph[:l]}
  ][
   ->x{update_data[x];msg=grph[:w]}
  ][
    to_peano[seed]
  ]
 :
 input.size == 0 ? nil : msg=grph[:i];





























chess_end="}}#{}];";
code,rest=q.split(chess_end);
code=(code+chess_end).gsub(/[\n #]+/,'');
rest.slice!(/\A.+?;;\s*/m)







cntr = ->string{string.center(195)}












render_board = ->(board, horizontal_divider, vertical_divider) {
  vertical_divider = [[vertical_divider]]*13
  horizontal_divider = [horizontal_divider]

  board.each_slice(8).inject([]) { |memo, row|
    memo + [horizontal_divider] + row.inject(vertical_divider) { |memo, piece|
      memo.zip(grph[:p][piece.abs]).zip(vertical_divider).map(&:flatten)
    }
  }.+([horizontal_divider]).inject([]) { |memo, row|
    memo << cntr[row.each_slice(2).inject('') { |memo, (chars, spaces)|
                  memo + ?4*chars + " "*(spaces||0)
                }]
  }.reject(&:empty?)
}

board_art = render_board[next_board, 195, 3]
capture_art  = render_board[captures, 0, 0]


borders = (?4*(code.size+10-(board_art+capture_art).join.count(?4))).gsub(/.{195}/) { |line| line+?\n }.split
bottom_bottom_border = [(borders.pop).center(195)]

bottom_border, top_border = ([[],[]] + [*borders.each_slice([1,(borders.size/2.0).ceil].max)]).compact[-2..-1]


board_art = (top_border + board_art.zip(grph[:r]).map(&:join) + bottom_border + bottom_bottom_border + capture_art)
board_art.first.slice!(185,195)
board_art=board_art.join(?\n).gsub(/[^ \n#]+/) { |chars| code.slice!(0,chars.size) }.split(?\n)

total = 0












  strip = ->obj{obj.inspect.gsub(/\s+/,'')}
  puts(msg+grph[:c]+"eval(q=%q#{126.chr+board_art.join(?\n)}\n"+[cntr["last_board=#{strip[next_board]}"],cntr["copyright=#{copyright.inspect}"],cntr["captures=#{strip[captures]};last_moved=#{strip[last_moved]};seed=Random.new(#{seed}).rand(100);;"]].join(?\n)+"\n\n#{rest+126.chr})")
~)
